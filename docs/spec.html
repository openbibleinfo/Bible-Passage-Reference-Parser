<!DOCTYPE html>  <html> <head>   <title>spec.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="bcv_parser.html">                 bcv_parser.coffee               </a>                                           <a class="source" href="bcv_passage.html">                 bcv_passage.coffee               </a>                                           <a class="source" href="regexps_en.html">                 regexps_en.coffee               </a>                                           <a class="source" href="translations_en.html">                 translations_en.coffee               </a>                                           <a class="source" href="spec.html">                 spec.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               spec.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">describe</span> <span class="s2">&quot;Pre-parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>

	<span class="nx">it</span> <span class="s2">&quot;should be defined&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">).</span><span class="nx">toBeDefined</span>

	<span class="nx">it</span> <span class="s2">&quot;should have book regexps&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">regexps</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="s2">&quot;Gen&quot;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">regexps</span><span class="p">.</span><span class="nx">escaped_passage</span><span class="p">).</span><span class="nx">toBeDefined</span>

	<span class="nx">it</span> <span class="s2">&quot;should reset itself&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.s = </span><span class="s2">&quot;string&quot;</span>
		<span class="nv">p.entities = </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;hi&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">s</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">passage</span><span class="p">.</span><span class="nx">books</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">passage</span><span class="p">.</span><span class="nx">indices</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">{}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">book_alone_strategy</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;hi&quot;</span> <span class="c1">#options don&#39;t get reset</span>

	<span class="nx">it</span> <span class="s2">&quot;should reset itself when creating a new object&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.s = </span><span class="s2">&quot;string&quot;</span>
		<span class="nv">p.entities = </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;hi&quot;</span>
		<span class="nv">p.options.nonexistent_option = </span><span class="s2">&quot;hi&quot;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">s</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">passage</span><span class="p">).</span><span class="nx">toEqual</span> <span class="kc">null</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">book_alone_strategy</span><span class="p">).</span><span class="o">not</span><span class="p">.</span><span class="nx">toEqual</span> <span class="s2">&quot;hi&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">nonexistent_option</span><span class="p">).</span><span class="nx">toBeUndefined</span><span class="p">()</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle resetting options&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;hi&quot;</span>
		<span class="nv">p.options.nonexistent_option = </span><span class="s2">&quot;hi&quot;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="p">{</span><span class="nv">book_alone_strategy: </span><span class="s2">&quot;hi&quot;</span><span class="p">,</span> <span class="nv">nonexistent_option: </span><span class="s2">&quot;hi&quot;</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">book_alone_strategy</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;hi&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">nonexistent_option</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;hi&quot;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">book_alone_strategy</span><span class="p">).</span><span class="o">not</span><span class="p">.</span><span class="nx">toEqual</span> <span class="s2">&quot;hi&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">nonexistent_option</span><span class="p">).</span><span class="nx">toBeUndefined</span><span class="p">()</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle control characters&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_control_characters</span><span class="p">(</span><span class="s2">&quot; hi &quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">4</span>
		<span class="nv">test_string = </span><span class="s2">&quot; \x1ehi\x1e \r\n \x1f0\x1f\n\r\u00a0\x00\u001e\u2014\xa0\x1f\x1f&quot;</span>
		<span class="nv">match_string = </span><span class="s2">&quot;  hi  \r\n  0 \n\r\u00a0\x00 \u2014\xa0  &quot;</span>
		<span class="nv">replaced_string = </span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_control_characters</span><span class="p">(</span><span class="nx">test_string</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">replaced_string</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="nx">test_string</span><span class="p">.</span><span class="nx">length</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">escape</span><span class="p">(</span><span class="nx">replaced_string</span><span class="p">)).</span><span class="nx">toEqual</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">match_string</span><span class="p">)</span>

	<span class="nx">it</span> <span class="s2">&quot;should match basic books&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">books</span><span class="p">]</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">match_books</span> <span class="s2">&quot;Jeremiah, Genesisjer (NIV)&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">books</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">2</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nv">value: </span><span class="s2">&quot;Jeremiah&quot;</span><span class="p">,</span> <span class="nv">parsed: </span><span class="p">[</span><span class="s2">&quot;Jer&quot;</span><span class="p">],</span> <span class="nv">start_index: </span><span class="mi">0</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">books</span><span class="p">[</span><span class="mi">1</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nv">value: </span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span> <span class="nv">parsed: </span><span class="s2">&quot;niv&quot;</span><span class="p">,</span> <span class="nv">start_index: </span><span class="mi">22</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f, Genesisjer (\x1e1\x1e)&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should match passage sequences&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">sequences = </span><span class="p">[</span>
			<span class="p">[</span><span class="s2">&quot;\x1f0\x1f&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;\x1f0\x1f 1:2, 3:4; see also 5:6-7 and compare cf. 8.9ff (\x1e1\x1e)&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;see \x1f0\x1f&quot;</span><span class="p">,</span> <span class="s2">&quot;seeR&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;see \&quot;\x1f999\x1f\&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;see R&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;\x1f0\x1f and me.&quot;</span><span class="p">,</span> <span class="s2">&quot;Rme.&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;my\x1f0\x1f and .&quot;</span><span class="p">,</span> <span class="s2">&quot;my\x1f0\x1f and .&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot; \x1f0\x1f and . then \x1f1\x1f 2-3ff for\x1f1\x1f 3&quot;</span><span class="p">,</span> <span class="s2">&quot;RthenRfor\x1f1\x1f 3&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;1\x1f0\x1f2&quot;</span><span class="p">,</span> <span class="s2">&quot;1\x1f0\x1f2&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;\x1f0\x1f2\x1f1\x1f3&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">]</span>
			<span class="p">[</span><span class="s2">&quot;\x1f\x1f \x1fa\x1f 2&quot;</span><span class="p">,</span> <span class="s2">&quot;\x1f\x1f \x1fa\x1f 2&quot;</span><span class="p">]</span>	<span class="c1">#no number; shouldn&#39;t happen</span>
		<span class="p">]</span>
		<span class="k">for</span> <span class="p">[</span><span class="nx">s</span><span class="p">,</span> <span class="nx">post</span><span class="p">]</span> <span class="k">in</span> <span class="nx">sequences</span>
			<span class="nv">s = </span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span> <span class="nx">p</span><span class="p">.</span><span class="nx">regexps</span><span class="p">.</span><span class="nx">escaped_passage</span><span class="p">,</span> <span class="nf">(match, $1, $2) -&gt;</span> <span class="s2">&quot;R&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">toEqual</span> <span class="nx">post</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle consecutive checking&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">3</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">30</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">50</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">26</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">50</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">is_verse_consecutive</span><span class="p">({</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">50</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">26</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;default&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>

	<span class="nx">it</span> <span class="s2">&quot;should identify being followed by a book&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">starts_with_book</span><span class="p">(</span><span class="nv">type: </span><span class="s2">&quot;bc&quot;</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">starts_with_book</span><span class="p">(</span><span class="nv">type: </span><span class="s2">&quot;cv&quot;</span><span class="p">)).</span><span class="nx">toBeFalsy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">starts_with_book</span><span class="p">(</span><span class="nv">type: </span><span class="s2">&quot;range&quot;</span><span class="p">,</span> <span class="nv">start: </span><span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;bcv&quot;</span><span class="p">})).</span><span class="nx">toBeTruthy</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">starts_with_book</span><span class="p">(</span><span class="nv">type: </span><span class="s2">&quot;range&quot;</span><span class="p">,</span> <span class="nv">start: </span><span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">})).</span><span class="nx">toBeFalsy</span><span class="p">()</span>

	<span class="nx">it</span> <span class="s2">&quot;should turn on/off the Apocrypha&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">chapters</span><span class="p">.</span><span class="nx">Ps</span><span class="p">[</span><span class="mi">150</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="mi">7</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">Tob</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">67</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">chapters</span><span class="p">.</span><span class="nx">Ps</span><span class="p">[</span><span class="mi">150</span><span class="p">]).</span><span class="o">not</span><span class="p">.</span><span class="nx">toBeDefined</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">Tob</span><span class="p">).</span><span class="o">not</span><span class="p">.</span><span class="nx">toBeDefined</span><span class="p">()</span>

	<span class="nx">it</span> <span class="s2">&quot;should replace ends correctly&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f 3b&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f 3b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f 3b.&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f 3b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f 3chapter&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f 3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f 3ff. &quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f 3ff.&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f go&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;\x1f0\x1f 3.&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;\x1f0\x1f 3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;(\x1e0\x1e)&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;(\x1e0\x1e)&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace_match_end</span> <span class="s2">&quot;[\x1e0\x1e]&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;[\x1e0\x1e]&quot;</span>

<span class="nx">describe</span> <span class="s2">&quot;OSIS parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nv">translation = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nv">translation = </span><span class="s2">&quot;default&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;ignore&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for b-b with various parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>

		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>

		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.50.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for bc-b with various parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>

		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>

		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.50.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.50.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for bcv-b with various parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Don't need to check the book alone strategy; the previous test handles it</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.50.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for b-bc with various parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">22</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Rev&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">22</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Rev.22&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.20&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">22</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.22.21&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for b-bcv with various parsing strategies&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for bcs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
	<span class="nx">it</span> <span class="s2">&quot;should return OSIS for bcvs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1-Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">31</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">25</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.2.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">to_osis</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Rev&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="nx">translation</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Rev.1.1&quot;</span>

<span class="nx">describe</span> <span class="s2">&quot;Basic passage parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
	<span class="nv">psg = </span><span class="p">{}</span>
	<span class="nv">translation_obj = translation: </span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nv">psg = </span><span class="nx">p</span><span class="p">.</span><span class="nx">passage</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle start indices&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">psg.books = </span><span class="p">[{</span><span class="nv">start_index: </span><span class="mi">0</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;Genesis&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">start_index: </span><span class="mi">12</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;N&quot;</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Genesis 2:3</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">calculate_indices</span> <span class="s2">&quot;\x1f0\x1f 2:3&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">4</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Genesis 2:3-N 5</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">calculate_indices</span> <span class="s2">&quot;\x1f0\x1f 2:3-\x1e1\x1e 5&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">2</span><span class="p">}]</span>
		<span class="nv">psg.books = </span><span class="p">[{</span><span class="nv">start_index: </span><span class="mi">3</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;Genesis&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">start_index: </span><span class="mi">15</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;N&quot;</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>preGenesis 2:3</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">calculate_indices</span> <span class="s2">&quot;pre\x1f0\x1f 2:3&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">4</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>preGenesis 2:3-N 5</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">calculate_indices</span> <span class="s2">&quot;pre\x1f0\x1f 2:3-\x1e1\x1e 5&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">15</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">2</span><span class="p">}]</span>
		<span class="nv">psg.books = </span><span class="p">[{</span><span class="nv">start_index: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;Genesis&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">start_index: </span><span class="mi">15</span><span class="p">,</span> <span class="nv">value: </span><span class="s2">&quot;Exodus&quot;</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>GenesisExodus 6</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">calculate_indices</span> <span class="s2">&quot;\x1f0\x1f\x1f1\x1f 6&quot;</span><span class="p">,</span> <span class="s2">&quot;08&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">8</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">12</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">15</span><span class="p">}]</span>
	<span class="nx">it</span> <span class="s2">&quot;should match absolute indices&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">psg.indices = </span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span> <span class="nx">end</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span><span class="mi">6</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">get_absolute_indices</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">get_absolute_indices</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">get_absolute_indices</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">null</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">get_absolute_indices</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="kc">null</span><span class="p">]</span>
	<span class="nx">it</span> <span class="s2">&quot;should validate refs with starts only&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_book_not_exist: </span><span class="kc">true</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">51</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_not_exist: </span><span class="mi">50</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">0</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_is_zero: </span><span class="mi">1</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;31&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">0</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_verse_is_zero: </span><span class="mi">1</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">32</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_verse_not_exist: </span><span class="mi">31</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;none&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_not_numeric: </span><span class="kc">true</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;none&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_verse_not_numeric: </span><span class="kc">true</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_not_exist_in_single_chapter_book: </span><span class="mi">1</span><span class="p">}}</span>
	<span class="nx">it</span> <span class="s2">&quot;should validate refs with starts and ends&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mal&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">end_book_before_start: </span><span class="kc">true</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;five&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;one&quot;</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_not_numeric: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">end_chapter_not_numeric: </span><span class="kc">true</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span> <span class="s2">&quot;six&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_verse_not_numeric: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">end_chapter_not_exist_in_single_chapter_book: </span><span class="mi">1</span><span class="p">}}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">50</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">12</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">{</span><span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_chapter_not_exist: </span><span class="mi">28</span><span class="p">,</span> <span class="nv">end_chapter_before_start: </span><span class="kc">true</span><span class="p">}}</span>
	<span class="nx">it</span> <span class="s2">&quot;should validate start refs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_book_not_exist: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;five&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_chapter_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">10</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;ten&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_verse_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;five&quot;</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;ten&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_chapter_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">10</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;ten&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_verse_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">100</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_verse_not_exist: </span><span class="mi">48</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">100</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">100</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_chapter_not_exist: </span><span class="mi">28</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_start_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;None&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">start_book_not_exist: </span><span class="kc">true</span><span class="p">}]</span>
	<span class="nx">it</span> <span class="s2">&quot;should validate end refs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mark&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mark&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_book_before_start: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_book_before_start: </span><span class="kc">true</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>When called through validate_ref, as in the next example, it's invalid</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;None&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">4</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;None&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">4</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">start_book_not_exist: </span><span class="kc">true</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">6</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">4</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">10</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_chapter_before_start: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">4</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">0</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_chapter_is_zero: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">end_chapter_before_start: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">0</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_chapter_is_zero: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">end_chapter_before_start: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;four&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_chapter_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">6</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">1000</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_verse_not_exist: </span><span class="mi">48</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">3</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_verse_before_start: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;eight&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_verse_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;seven&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;eight&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_verse_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">100</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_verse_not_exist: </span><span class="mi">48</span><span class="p">}]</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>These two are really undefined cases that would be caught if called through <code>validate_ref</code></p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;seven&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">8</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;seven&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">8</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="p">{}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_end_ref</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Matt&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="nv">v: </span><span class="s2">&quot;two&quot;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="kc">false</span><span class="p">,</span> <span class="p">{</span><span class="nv">end_book_before_start: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">end_chapter_not_numeric: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">end_verse_not_numeric: </span><span class="kc">true</span><span class="p">}]</span>
	<span class="nx">it</span> <span class="s2">&quot;should handle translations&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="p">[{</span><span class="nv">translation: </span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nv">translation: </span><span class="s2">&quot;niv&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">}],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;1Pet&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">3</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>No <code>translation</code>, so use the default translation</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="p">[{</span><span class="nv">no_key: </span><span class="s2">&quot;none&quot;</span><span class="p">}],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Given a string instead of an array, it iterates over each character. Since there's no <code>String.translation</code> object (i.e., the <code>translation</code> object is invalid), it uses the default and doesn't set <code>alias</code>. In practice, this won't hapepen</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">translation_invalid: </span><span class="kc">true</span><span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Given a number, it just doesn't work</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">validate_ref</span> <span class="mi">12</span><span class="p">,</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="nv">valid: </span><span class="kc">false</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{</span><span class="nv">translation_invalid: </span><span class="kc">true</span><span class="p">}</span>
	<span class="nx">it</span> <span class="s2">&quot;should handle bvs posing as bcs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">psg</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nv">parsed: </span><span class="p">[</span><span class="s2">&quot;Phlm&quot;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">2</span><span class="p">}]}]},</span> <span class="p">[],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">6</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">2</span><span class="p">}]}],</span> <span class="nv">start_context: </span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">6</span><span class="p">},</span> <span class="nv">passages: </span><span class="p">[{</span><span class="nv">start: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="nv">end: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">},</span> <span class="nv">valid: </span><span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}}]}],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">2</span><span class="p">}]</span>

		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}]},</span> <span class="p">[],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">6</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}],</span> <span class="nv">start_context: </span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">6</span><span class="p">},</span> <span class="nv">passages: </span><span class="p">[{</span><span class="nv">start: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="nv">end: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="nv">valid: </span><span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}}}]}],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">}]</span>

		<span class="nx">psg</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nv">parsed: </span><span class="p">[</span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="s2">&quot;Phil&quot;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="mi">2</span><span class="p">}]}]},</span> <span class="p">[],</span> <span class="p">{</span><span class="nv">translations: </span><span class="p">[{</span><span class="nv">translation: </span><span class="s2">&quot;niv&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">},{</span><span class="nv">translation: </span><span class="s2">&quot;kjv&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;KJV&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">}]}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="mi">2</span><span class="p">}]}],</span><span class="nx">start_context</span><span class="o">:</span><span class="p">{</span><span class="nx">translations</span><span class="o">:</span><span class="p">[{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;niv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">},{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">}]},</span><span class="nx">passages</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span><span class="nx">alternates</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}}}],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;niv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">},{</span> <span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">}]}]}],</span> <span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nv">translations : </span><span class="p">[</span> <span class="p">{</span> <span class="nv">translation : </span><span class="s1">&#39;niv&#39;</span><span class="p">,</span> <span class="nv">osis : </span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span> <span class="nv">alias : </span><span class="s1">&#39;default&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nv">translation : </span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span> <span class="nv">osis : </span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span> <span class="nv">alias : </span><span class="s1">&#39;default&#39;</span> <span class="p">}]}]</span>

		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}]},</span> <span class="p">[],</span> <span class="p">{</span><span class="nv">translations: </span><span class="p">[{</span><span class="nv">translation: </span><span class="s2">&quot;niv&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">},{</span><span class="nv">translation: </span><span class="s2">&quot;kjv&quot;</span><span class="p">,</span> <span class="nv">osis: </span><span class="s2">&quot;KJV&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;default&quot;</span><span class="p">}]}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="mi">7</span><span class="p">}]}],</span><span class="nx">start_context</span><span class="o">:</span><span class="p">{</span><span class="nx">translations</span><span class="o">:</span><span class="p">[{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;niv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">},{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">}]},</span><span class="nx">passages</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span><span class="nx">alternates</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{</span><span class="nx">start_chapter_not_exist</span><span class="o">:</span><span class="mi">4</span><span class="p">}}}],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[{</span><span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;niv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">},{</span> <span class="nx">translation</span><span class="o">:</span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span><span class="nx">alias</span><span class="o">:</span><span class="s1">&#39;default&#39;</span><span class="p">}]}]}],</span> <span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span><span class="nv">translations : </span><span class="p">[</span> <span class="p">{</span> <span class="nv">translation : </span><span class="s1">&#39;niv&#39;</span><span class="p">,</span> <span class="nv">osis : </span><span class="s1">&#39;NIV&#39;</span><span class="p">,</span> <span class="nv">alias : </span><span class="s1">&#39;default&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nv">translation : </span><span class="s1">&#39;kjv&#39;</span><span class="p">,</span> <span class="nv">osis : </span><span class="s1">&#39;KJV&#39;</span><span class="p">,</span> <span class="nv">alias : </span><span class="s1">&#39;default&#39;</span> <span class="p">}]}]</span>

		<span class="nx">psg</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nv">parsed: </span><span class="p">[</span><span class="s2">&quot;Phil&quot;</span><span class="p">,</span> <span class="s2">&quot;Phlm&quot;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">2</span><span class="p">}]}]},[],{}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="mi">2</span><span class="p">}]}],</span><span class="nx">start_context</span><span class="o">:</span><span class="p">{},</span><span class="nx">passages</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span><span class="nx">alternates</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phlm&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}}}]}]}],{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">2</span><span class="p">}]</span>

		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc</span> <span class="p">{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}]},</span> <span class="p">[],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">6</span><span class="p">}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}],</span> <span class="nv">start_context: </span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">6</span><span class="p">},</span> <span class="nv">passages: </span><span class="p">[{</span><span class="nv">start: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="nv">end: </span><span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">},</span> <span class="nv">valid: </span><span class="p">{</span><span class="nv">valid: </span><span class="kc">true</span><span class="p">,</span> <span class="nv">messages: </span><span class="p">{}},</span><span class="nx">alternates</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Phil&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{</span><span class="nx">start_chapter_not_exist</span><span class="o">:</span><span class="mi">4</span><span class="p">}}}}]]}],</span> <span class="p">{</span><span class="nv">b: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">c: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">v: </span><span class="mi">7</span><span class="p">}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle `bc_title`s&quot;</span><span class="p">,</span> <span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Psalm7 title (where "Psalm" could be interpreted different ways)</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">psg</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nv">parsed = </span><span class="p">[</span><span class="s2">&quot;Phil&quot;</span><span class="p">,</span> <span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="s2">&quot;Ps&quot;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">bc_title</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;bc_title&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nv">type: </span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nv">absolute_indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="p">[{</span><span class="nv">type: </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">value: </span><span class="mi">7</span><span class="p">}]}]},</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">]}]},</span> <span class="p">[],</span> <span class="p">{}).</span><span class="nx">toEqual</span> <span class="p">[[{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;bcv&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;bc&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">value</span><span class="o">:</span><span class="mi">7</span><span class="p">}]}],</span><span class="nx">start_context</span><span class="o">:</span><span class="p">{},</span><span class="nx">passages</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}}}]},{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;v&quot;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="p">[{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="nx">value</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">]}],</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="p">]}],</span><span class="nx">start_context</span><span class="o">:</span><span class="p">{},</span><span class="nx">original_type</span><span class="o">:</span><span class="s2">&quot;bc_title&quot;</span><span class="p">,</span><span class="nx">passages</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}}}]}],{</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="mi">1</span><span class="p">}]</span>

<span class="nx">describe</span> <span class="s2">&quot;Parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nv">p.options.sequence_combination_strategy = </span><span class="s2">&quot;combine&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle books&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1\u00a0Cor&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;1Cor&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle bcs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis ch 3 (NIV, ESV)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span> <span class="s2">&quot;ESV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1:2-ch 7&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.2-Gen.7.24&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;and Gen 1 5, Jere 2-3 see my Genesis ch 6 (NIV, ESV)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.5,Jer.2-Jer.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">21</span><span class="p">]},</span> <span class="p">{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.6&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span><span class="s2">&quot;ESV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">52</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jer.5.ESV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;Jer.5&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;ESV&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 1 ESV, Matt 2 NIV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;Matt.1&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;ESV&#39;</span><span class="p">]},{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;Matt.2&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">22</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;NIV&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 1 1st to see&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;Matt.1&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle bvs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis verse 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon verse 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 5-6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.5-Phlm.1.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis verse 7-8&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.7-Gen.1.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon verse9- Philemon verse 10&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.9-Phlm.1.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon verse 11, Philemon verse 12&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.11-Phlm.1.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 13a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.13&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ranges&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-2 ESV, NIV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;ESV&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-2 [ESV, NIV]&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;ESV&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;(Genesis 1-2 (ESV, NIV))&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;ESV&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Jeremiah 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Jeremiah 2:5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.1-Jer.2.5&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Jeremiah 2:100&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-1:2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.1-Gen.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-2:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.1-Gen.2.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-2:100&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 1-10&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.1-Phlm.1.10&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 2-10&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.2-Phlm.1.10&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 1-1:10&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.1-Phlm.1.10&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 2-100&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 1-68&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Philemon 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2.1-Phlm.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Philemon 1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2-Phlm.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1:2-Philemon 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1.2-Phlm.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 2-Hebrews 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.2-Heb.2.18&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philem 1-Hebrews 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1-Heb.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;jo 1-2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;John.1-John.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jeremiah 2-Genesis 1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Jer.2,Gen.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 51-Jeremiah 6&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Jer.6&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">21</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Devotions: John 10:22-42  vs 27 \&quot;My sheep hear my voice&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;John.10.22-John.10.42,John.10.27&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">31</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should match integers correctly&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Zech.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 12&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Zech.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 12&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Zech.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 120&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 1000&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 1,000&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 12,000&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Zechariah 120,000&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle book ranges with an `ignore` `book_sequence_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jeremiah-Isaiah&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon 1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Philemon&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luke-Acts&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle book ranges with an `include` `book_sequence_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen-Jer&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1,Jer&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Jeremiah&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2,Jer&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jeremiah-Isaiah&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jer,Isa&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen-Phlm&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon 1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen,Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-Genesis&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1,Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.2,Gen&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">17</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 2-Philemon&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.2,Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis-Philemon 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen,Phlm.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luke-Acts&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke-Acts&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle sequences&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1, 2, 3, 4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Jer 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3,Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Philemon 1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3,Phlm&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Philemon 1-2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3,Phlm.1.1-Phlm.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 5:2 John 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5,2John.1.2&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `separate` `sequence_combination_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.sequence_combination_strategy = </span><span class="s2">&quot;separate&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Jer 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">]},{</span><span class="nv">osis: </span><span class="s2">&quot;Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Jer 2 skip Phlm 3,4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">]},{</span><span class="nv">osis: </span><span class="s2">&quot;Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">]},{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.3-Phlm.1.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">24</span><span class="p">,</span><span class="mi">32</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Eph. 4. Gen, Matt, 6&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Eph.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Matt.6&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Eph. 4. Gen, Matt, 1cor6-7&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Eph.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Cor.6-1Cor.7&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">19</span><span class="p">,</span><span class="mi">26</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Eph. 4. Gen, Matt, 1cor, 6-7&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Eph.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Cor.6-1Cor.7&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">19</span><span class="p">,</span><span class="mi">28</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 1: 98, 99, 2, 97, 8 John 3:2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.1.2&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.1.8&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;John.3.2&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">25</span><span class="p">,</span><span class="mi">33</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jdg 12:11 break Judges 99,2,KJV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.12.11&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.2&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">31</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;KJV&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `ignore` `book_sequence_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.23.10,Isa.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">37</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.23.10,Isa.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">37</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Genesis Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.23.10,Isa.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">40</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis, Exodus&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 is my&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 ha ha ha&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `include` `book_sequence_strategy` with a `first_chapter` book_alone_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;first_chapter&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.1,Isa.23.10,Isa.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">37</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.1,Isa.23.10,Isa.1.2,Isa.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Genesis Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa.1,Isa.23.10,Gen.1,Isa.1.2,Isa.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis, Exodus&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1,Exod.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 is my&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10,Isa.1&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 ha ha ha&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10,Hab.1,Hab.1,Hab.1&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `include` `book_sequence_strategy` with a `full` book_alone_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;full&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa,Isa.23.10,Isa.1.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">37</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Also Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa,Isa.23.10,Isa.1.2,Isa&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;This is Isaiah 23:10. Genesis Isaiah 1:2 is good.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Isa,Isa.23.10,Gen,Isa.1.2,Isa&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis, Exodus&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen-Exod&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 is my&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10,Isa&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 ha ha ha&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10,Hab,Hab,Hab&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle cbs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="nv">translations : </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis 15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1,Gen.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis verse 16&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.16&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis, verse 17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis, verses 18-19&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.18-Gen.1.19&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapter 1 of Genesis, verses 18-19:4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.18-Gen.19.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis chapter 3 of Mark&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1st ch. of Mark&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Mark.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;20nd ch. of the book of Luke&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.20&quot;</span> <span class="c1">#no, 20nd isn&#39;t a real ordinal</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;119th chapter of the book of Psalms verses 23-25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.23-Ps.119.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;119 th ch. of the book of Psalms&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Better: Gal.4.1-Gal.4.6</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;4th chapter of Galatians, 1-6 &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gal.4,Gal&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle cb ranges&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapters 1-3 of Genesis&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.3&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">23</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapters 1-4 of Genesis 15&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.4,Gen.15&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">26</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chs. 1 to 5 of Genesis verse 16&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.5,Gen.5.16&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">31</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ch. 1 through 6 of Genesis, verse 17&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.6,Gen.6.17&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">36</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapters 1-7 of Genesis, vv. 18-19&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.7,Gen.7.18-Gen.7.19&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">34</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Chapters 1-8 of Genesis, verses 18-19:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.1-Gen.8,Gen.8.18-Gen.19.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">39</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis chapters 3-4 of Mark&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.3-Gen.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle c_psalms (\&quot;23rd Psalm\&quot;)&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ps.23&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="nv">translations : </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;150th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.150&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1stPsalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;11th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;11st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;101th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;101st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.101&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;111th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.111&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;111st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;121st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;122st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;122th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;113st Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;113rd Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;113th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.113&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;103th Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;103rd Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.103&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;122 nd Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm, 122 nd Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23,Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm, 2 122 nd Psalm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23,Ps.2,Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm vv.3-4, 1st Psalm v3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23.3-Ps.23.4,Ps.1.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm vv.3-4, 1st Psalmverse 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23.3-Ps.23.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm, verse 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm, verses 2-3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23.2-Ps.23.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;23rd Psalm, verses 2 and 4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.23.2,Ps.23.4&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle translation sequences&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">parse</span> <span class="s2">&quot;Genesis 5 (NIV, ESV, KJV)&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">2</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">passages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">translations</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">3</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Gen.5&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV,ESV,KJV&quot;</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">parse</span> <span class="s2">&quot;Jer 1 NIV, Genesis 50, TNIV, Ge 6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">5</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">passages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">translations</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;NIV&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">passages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">translations</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;TNIV&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">entities</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nx">passages</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">translations</span><span class="p">).</span><span class="o">not</span><span class="p">.</span><span class="nx">toBeDefined</span><span class="p">()</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Jer.1&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span> <span class="s2">&quot;TNIV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Gen.6&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>

	<span class="nx">it</span> <span class="s2">&quot;should check ends before start&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
		<span class="nv">psg = </span><span class="nx">p</span><span class="p">.</span><span class="nx">passage</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">105</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">106</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">105</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">106</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">0</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">110</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">111</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">110</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">20</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">120</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">111</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">0</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">111</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">112</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">111</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">0</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">4</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">14</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">0</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">100</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">109</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">100</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">19</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">119</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">102</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">24</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">124</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">psg</span><span class="p">.</span><span class="nx">range_get_new_end_value</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">105</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="mi">104</span><span class="p">},</span> <span class="p">{</span><span class="nx">messages</span><span class="o">:</span><span class="p">{}},</span> <span class="s2">&quot;c&quot;</span><span class="p">).</span><span class="nx">toEqual</span> <span class="mi">0</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ends before starts (ints)&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121, 22&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121,Ps.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-22&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm 121-Gen 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121,Gen.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;genisis 50-49&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.50,Gen.49&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 28-9&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.28-Gen.29&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 28:1-51:100&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.28-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 28:1-51:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.28-Gen.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 28-0&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.28&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 1:16-7&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.16-Gen.1.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ps119 170-1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.170-Ps.119.171&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;phlm 1:12-3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.12-Phlm.1.13&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;phlm 12-3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.12-Phlm.1.13&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ends before starts (cvs)&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-22:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121.1-Ps.122.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-6:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121.1-Ps.126.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-36:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121.1-Ps.136.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 21-0:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.21&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 31:30-31:1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.31.30,Prov.31.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 31:30-1:1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.31.30,Prov.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 31:30-30:1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.31.30,Prov.30.1&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Debatable</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 21:2-1:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.21.2,Ps.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 21:6-1:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.21.6,Ps.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 22:6-1:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.22.6,Ps.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 21:6-2:4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.21.6-Ps.22.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 21:6-19:4,3:5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.21.6,Ps.19.4,Ps.3.5&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ends before starts (verses)&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:125-24a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.125,Ps.119.24&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:125-4a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.125,Ps.119.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:125-26a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.125-Ps.119.126&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:125-6a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.125-Ps.119.126&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:16-4a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.16,Ps.119.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:16-7a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.16-Ps.119.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:6-4a,3:5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.6,Ps.119.4,Ps.3.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 119:6-7a,3:5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.119.6-Ps.119.7,Ps.3.5&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ffs&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.150&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121:1ff .&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121:2f.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121.2-Ps.121.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 1 ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:1ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:2ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 2ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50f&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50:60ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="kc">undefined</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-2ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.150&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121-122:3ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:1-4 ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:2-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 2-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50-50f&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121ff-2ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.150&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 121ff-122:3ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.121-Ps.122&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1ff-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:1ff-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 1:2ff-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phm 2ff-4ff&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">osis</span><span class="p">).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2-Phlm.1.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50f-50f&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50:1 forever&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.50.1&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50:1 fa&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span> <span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gen.50.1&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;so f&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;and 1 COR 11: 5 FF.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Cor.11.5-1Cor.11.34&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">19</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;and 1 COR 11: 5 FF&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Cor.11.5-1Cor.11.34&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">18</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as errors&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.zero_chapter_strategy = </span><span class="s2">&quot;error&quot;</span>
		<span class="nv">p.options.zero_verse_strategy = </span><span class="s2">&quot;error&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as chapter upgrades&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.zero_chapter_strategy = </span><span class="s2">&quot;upgrade&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2,Hos.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2,Hos.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as verse upgrades&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="p">{</span><span class="nv">zero_verse_strategy: </span><span class="s2">&quot;upgrade&quot;</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2-Hos.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1-Hos.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2,Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.1,Phlm.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 20:1-0:4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.20.1&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as allowed verses&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="p">{</span><span class="nv">zero_verse_strategy: </span><span class="s2">&quot;allow&quot;</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2-Hos.3.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0-Hos.3.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2,Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 20:1-0:4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.20.1&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as both upgrades&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.zero_chapter_strategy = </span><span class="s2">&quot;upgrade&quot;</span>
		<span class="nv">p.options.zero_verse_strategy = </span><span class="s2">&quot;upgrade&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2-Hos.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1-Hos.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2,Hos.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2,Hos.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 20:1-0:4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.20.1,Ps.1.4&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle zeroes as chapter upgrade and allowed verse&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.zero_chapter_strategy = </span><span class="s2">&quot;upgrade&quot;</span>
		<span class="nv">p.options.zero_verse_strategy = </span><span class="s2">&quot;allow&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2-Hos.3.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:0-3:0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0-Hos.3.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2,Hos.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Hosea 2:2, 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Hos.2.2,Hos.2.0&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0:2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Phlm 0-0&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 20:1-0:4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.20.1,Ps.1.4&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `delete` `captive_end_digits_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.captive_end_digits_strategy = </span><span class="s2">&quot;delete&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2, 3a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2,Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2- 3ab&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1 - 3a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1 - 3 * a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 4a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2 3Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2 Matt 3Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 NIV 2 for&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-4 NIV 2 to&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-4 NIV 2m&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 NIV*2*&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2 Matt 3Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `include` `captive_end_digits_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.captive_end_digits_strategy = </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2, 3a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2,Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2- 3ab&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2-Rev.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1 - 3a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1 - 3 * a&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 4a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 4Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-2 Matt 3Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.2,Matt.3&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `verse` `end_range_digits_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.end_range_digits_strategy = </span><span class="s2">&quot;verse&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jer 33-11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jer.33.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Heb 13-15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Heb.13.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jer 33-11a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jer.33.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Heb 13-15a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Heb.13.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gal 5-22a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gal.5.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 5- verse 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5.6&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `sequence` `end_range_digits_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">p.options.end_range_digits_strategy = </span><span class="s2">&quot;sequence&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jer 33-11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jer.33,Jer.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Heb 13-15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Heb.13&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jer 33-11a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jer.33.1-Jer.33.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Heb 13-15a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Heb.13.1-Heb.13.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gal 5-22a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gal.5.1-Gal.5.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 5- verse 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5.6&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle no matches&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Nothing&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle `bcv_range` hyphens&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 John-2-3-4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1John.2.3-1John.2.4&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt-5-6-7&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5.6-Matt.5.7&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `combine` `consecutive_combination_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="p">{</span><span class="nv">consecutive_combination_strategy: </span><span class="s2">&quot;combine&quot;</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 12, 50, NIV, 6 split Matt 4, 5, 6:1-50, ch 8 ESV, MATT 10&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Gen.12,Gen.50&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Gen.6&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Matt.4-Matt.6,Matt.8&quot;</span><span class="p">,</span> <span class="s2">&quot;ESV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Matt.10&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1, 2, 3 4Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle a `separate` `consecutive_combination_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="p">{</span><span class="nv">consecutive_combination_strategy: </span><span class="s2">&quot;separate&quot;</span><span class="p">,</span> <span class="nv">book_sequence_strategy: </span><span class="s2">&quot;full&quot;</span><span class="p">}</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 12, 50, NIV, 6 split Matt 4, 5, 6:1-50, ch 8 ESV, MATT 10&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Gen.12,Gen.50&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Gen.6&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Matt.4,Matt.5,Matt.6,Matt.8&quot;</span><span class="p">,</span> <span class="s2">&quot;ESV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Matt.10&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon verse 11, Philemon verse 12&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phlm.1.11,Phlm.1.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1, 2, 3, 4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1,Gen.2,Gen.3,Gen.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1-3, Jer 2 skip Phlm 3,4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.1-Gen.3,Jer.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">]},{</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.3,Phlm.1.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">24</span><span class="p">,</span><span class="mi">32</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis, Exodus&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen,Exod&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1-3 4a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1-Rev.2.3,Rev.2.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 2:1, 2, 3 4Hi&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.2.1,Rev.2.2,Rev.2.3&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Reading and reflecting on Philippians 1 &amp; 2. &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phil.1,Phil.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;  john 3:16 i memorized it when i was 5.  now i like john 3:16-18..  vs 17 and 18 go with it too. they kinda help/clarify vs 16.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16,John.3.16-John.3.18,John.3.17,John.3.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 4:8/9.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.4.8,Matt.4.9&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Second Reading - Gen 22:1-2, 9a, 10-13, 15-18 ...   &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.22.1-Gen.22.2,Gen.22.9,Gen.22.10-Gen.22.13,Gen.22.15-Gen.22.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16~17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16,John.3.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 15, Mark 7,8 and 9&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.15,Mark.7,Mark.8,Mark.9&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;-Job 32:21-22-Col 3:25-Deut 10:17-Ja 2:1-4-Lev 19:15-Rom 2:9-11-Acts 10:34-35-Dt 1:17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Job.32.21-Job.32.22,Col.3.25,Deut.10.17,Jas.2.1-Jas.2.4,Lev.19.15-Rom.2.9,Rom.2.11,Acts.10.34,Acts.10.35,Deut.1.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1John3v21,22; 1John5v14,15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1John.3.21,1John.3.22,1John.5.14,1John.5.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deuteronomy 6,7Ecclesiastes 2John 19&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.6,Deut.7,Eccl&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jas 1:26,27. Vs 26- bridle.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jas.1.26,Jas.1.27,Jas.1.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Corinthians 4-7 and 8.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.4-1Cor.7,1Cor.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mark3.4.5.6.7.8.9.10.11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Mark.3.4,Mark.5.6,Mark.7.8,Mark.9.10,Mark.9.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deut 28 - v66-67 is a real&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.28.66-Deut.28.67,Isa&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle B,C,V as a special case&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 5, 6&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5.6&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt,5,6, 7, 8&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5.6-Matt.5.8&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">14</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 5, 6, 9, 10,&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5.6,Matt.5.9-Matt.5.10&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">17</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 5, 6:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5.1-Matt.6.1&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 5, 7:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5,Matt.7.1&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 7:12, 6:3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.7.12,Matt.6.3&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John Matt, 7,12, 6:3 Mark&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.7.12,Matt.6.3&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt, 5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Matt.5&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 2-3, Gen, Matt, 5&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;John.2-John.3,Matt.5&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">22</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 2-3, Gen, Matt, 5, 6&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;John.2-John.3,Matt.5.6&quot;</span><span class="p">,</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `include` `invalid_sequence_strategy&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">invalid_sequence_strategy: </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 99, Ha 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Hab.2&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 51-Jeremiah 6&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Jer.6&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 51, 50&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mk 2, Genesis 51, 50, 51, 47&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Mark.2,Gen.50,Gen.47&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">28</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Is 67 Mk 2, Genesis 51, 47, Hebrews 51, 7:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Mark.2,Gen.47,Heb.7.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">43</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `ignore` `invalid_sequence_strategy&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">invalid_sequence_strategy: </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 99, Ha 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Hab.2&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 51, 50&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Gen.50&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mk 2, Genesis 51, 50, 51, 47&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Mark.2,Gen.50,Gen.47&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">28</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Is 67 Mk 2, Genesis 51, 47, Hebrews 51, 7:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s2">&quot;Mark.2,Gen.47,Heb.7.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">43</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle an `include` `invalid_passage_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">invalid_passage_strategy: </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 50:60ff&quot;</span><span class="p">).</span><span class="nx">parsed_entities</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">valid</span><span class="p">.</span><span class="nx">messages</span><span class="p">).</span><span class="nx">toEqual</span> <span class="nv">start_verse_not_exist: </span><span class="mi">26</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ge 51:1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;matt 29-34&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;heb 0:6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Kings 45, 12:3&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;1Kgs.12.3&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ha 67&quot;</span><span class="p">).</span><span class="nx">parsed_entities</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="nx">entities</span><span class="p">).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;bc&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hab&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="kc">undefined</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hab&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">},</span><span class="nx">entity_id</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">entities</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hab&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="kc">undefined</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hab&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{</span><span class="nx">start_chapter_not_exist</span><span class="o">:</span><span class="mi">3</span><span class="p">}},</span><span class="nx">alternates</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hag&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">,</span><span class="nx">v</span><span class="o">:</span><span class="kc">undefined</span><span class="p">},</span><span class="nx">end</span><span class="o">:</span><span class="p">{</span><span class="nx">b</span><span class="o">:</span><span class="s1">&#39;Hag&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">67</span><span class="p">},</span><span class="nx">valid</span><span class="o">:</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="p">{</span><span class="nx">start_chapter_not_exist</span><span class="o">:</span><span class="mi">2</span><span class="p">}}}],</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;bc&quot;</span><span class="p">,</span><span class="nx">absolute_indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]}]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle `pre_book` ranges&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">book_alone_strategy: </span><span class="s2">&quot;full&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Sam-2Sam&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2John-3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;First through Third John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1John-3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam 3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Sam.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ruth 1-2 Sam&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ruth.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam, 1-2 Kings, Ruth 3, 1-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Sam.1,Ruth.3,Ruth.1&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">29</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ez 2. Then 1-3 John (NIV)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ezek.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">25</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1John-3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;3-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 and 3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle `pre_book` ranges in the Apocrypha&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">book_alone_strategy: </span><span class="s2">&quot;full&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-3 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Macc-3Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 and 4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 and 3 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Macc-3Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 and 4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Macc-4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2-4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Macc-4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;3-3 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;3-4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3Macc-4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;3 and 4 Macc&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3Macc-4Macc&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle `pre_book` ranges with an `include` `book_sequence_strategy`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">book_alone_strategy: </span><span class="s2">&quot;full&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">book_sequence_strategy: </span><span class="s2">&quot;include&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1Sam-2Sam&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2John-3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;First through Third John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;1John-3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam 3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Sam.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ruth 1-2 Sam&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ruth.1,2Sam&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-2 Sam, 1-2 Kings, Ruth 3, 1-3 John&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Sam,2Sam.1,2Kgs,Ruth.3,Ruth.1,3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">36</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ez 2. Then 1-3 John (NIV)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ezek.2&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">25</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle Psalm titles&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3:2, ch 119 title, ch23&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.2,Ps.119.1,Ps.23&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3, Title, 4, 6-7 title&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1,Ps.3.4,Ps.3.6-Ps.7.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3title4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1,Ps.3.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3title-4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1-Ps.3.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3title-ch 4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3-Ps.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 76 titles&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ps.76&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 76 titles, 4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ps.76&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 76 titles, 4, 3 John 2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ps.76&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;3John.1.2&#39;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="mi">25</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 76 titles-3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ps.76&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3:title, 4 title, 5: title NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1,Ps.4.1,Ps.5.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jo 3, title, 4 NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3-John.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jo 3, title, 4, Ps 2, 3title.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;John.3-John.4,Ps.2.1-Ps.3.1&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">28</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jo 3, title - 4, Ps 2 title - 3title&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;John.3-John.4,Ps.2.1-Ps.3.1&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">36</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 2:22, 27. Title&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Acts.2.22,Acts.2.27&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 2:22-27. Title&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Acts.2.22-Acts.2.27&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 2:22, ch 27. Title&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Acts.2.22,Acts.27&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philemon 3, 1. Title&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Phlm.1.3,Phlm.1.1&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 1;70:title &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.1,Ps.70.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Timothy 1-10 Title: Encouragement&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2Tim.1.10&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">14</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3:title=&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 3:title and&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.3.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 3:4a title and&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Matt.3.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 3:4a and.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;Matt.3.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>

	<span class="nx">it</span> <span class="s2">&quot;should round-trip OSIS references&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">osis_compaction_strategy: </span><span class="s2">&quot;bc&quot;</span>
		<span class="nv">books = </span><span class="p">[</span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span><span class="s2">&quot;Lev&quot;</span><span class="p">,</span><span class="s2">&quot;Num&quot;</span><span class="p">,</span><span class="s2">&quot;Deut&quot;</span><span class="p">,</span><span class="s2">&quot;Josh&quot;</span><span class="p">,</span><span class="s2">&quot;Judg&quot;</span><span class="p">,</span><span class="s2">&quot;Ruth&quot;</span><span class="p">,</span><span class="s2">&quot;1Sam&quot;</span><span class="p">,</span><span class="s2">&quot;2Sam&quot;</span><span class="p">,</span><span class="s2">&quot;1Kgs&quot;</span><span class="p">,</span><span class="s2">&quot;2Kgs&quot;</span><span class="p">,</span><span class="s2">&quot;1Chr&quot;</span><span class="p">,</span><span class="s2">&quot;2Chr&quot;</span><span class="p">,</span><span class="s2">&quot;Ezra&quot;</span><span class="p">,</span><span class="s2">&quot;Neh&quot;</span><span class="p">,</span><span class="s2">&quot;Esth&quot;</span><span class="p">,</span><span class="s2">&quot;Job&quot;</span><span class="p">,</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="s2">&quot;Prov&quot;</span><span class="p">,</span><span class="s2">&quot;Eccl&quot;</span><span class="p">,</span><span class="s2">&quot;Song&quot;</span><span class="p">,</span><span class="s2">&quot;Isa&quot;</span><span class="p">,</span><span class="s2">&quot;Jer&quot;</span><span class="p">,</span><span class="s2">&quot;Lam&quot;</span><span class="p">,</span><span class="s2">&quot;Ezek&quot;</span><span class="p">,</span><span class="s2">&quot;Dan&quot;</span><span class="p">,</span><span class="s2">&quot;Hos&quot;</span><span class="p">,</span><span class="s2">&quot;Joel&quot;</span><span class="p">,</span><span class="s2">&quot;Amos&quot;</span><span class="p">,</span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span><span class="s2">&quot;Jonah&quot;</span><span class="p">,</span><span class="s2">&quot;Mic&quot;</span><span class="p">,</span><span class="s2">&quot;Nah&quot;</span><span class="p">,</span><span class="s2">&quot;Hab&quot;</span><span class="p">,</span><span class="s2">&quot;Zeph&quot;</span><span class="p">,</span><span class="s2">&quot;Hag&quot;</span><span class="p">,</span><span class="s2">&quot;Zech&quot;</span><span class="p">,</span><span class="s2">&quot;Mal&quot;</span><span class="p">,</span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span><span class="s2">&quot;Luke&quot;</span><span class="p">,</span><span class="s2">&quot;John&quot;</span><span class="p">,</span><span class="s2">&quot;Acts&quot;</span><span class="p">,</span><span class="s2">&quot;Rom&quot;</span><span class="p">,</span><span class="s2">&quot;1Cor&quot;</span><span class="p">,</span><span class="s2">&quot;2Cor&quot;</span><span class="p">,</span><span class="s2">&quot;Gal&quot;</span><span class="p">,</span><span class="s2">&quot;Eph&quot;</span><span class="p">,</span><span class="s2">&quot;Phil&quot;</span><span class="p">,</span><span class="s2">&quot;Col&quot;</span><span class="p">,</span><span class="s2">&quot;1Thess&quot;</span><span class="p">,</span><span class="s2">&quot;2Thess&quot;</span><span class="p">,</span><span class="s2">&quot;1Tim&quot;</span><span class="p">,</span><span class="s2">&quot;2Tim&quot;</span><span class="p">,</span><span class="s2">&quot;Titus&quot;</span><span class="p">,</span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span><span class="s2">&quot;Heb&quot;</span><span class="p">,</span><span class="s2">&quot;Jas&quot;</span><span class="p">,</span><span class="s2">&quot;1Pet&quot;</span><span class="p">,</span><span class="s2">&quot;2Pet&quot;</span><span class="p">,</span><span class="s2">&quot;1John&quot;</span><span class="p">,</span><span class="s2">&quot;2John&quot;</span><span class="p">,</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span><span class="s2">&quot;Jude&quot;</span><span class="p">,</span><span class="s2">&quot;Rev&quot;</span><span class="p">]</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nv">bcv = </span><span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nv">bcv_range = </span><span class="nx">bcv</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;.2&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bc</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv_range</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv_range</span>

	<span class="nx">it</span> <span class="s2">&quot;should round-trip OSIS Apocrypha references&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">osis_compaction_strategy: </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nv">books = </span><span class="p">[</span><span class="s2">&quot;Tob&quot;</span><span class="p">,</span><span class="s2">&quot;Jdt&quot;</span><span class="p">,</span><span class="s2">&quot;GkEsth&quot;</span><span class="p">,</span><span class="s2">&quot;Wis&quot;</span><span class="p">,</span><span class="s2">&quot;Sir&quot;</span><span class="p">,</span><span class="s2">&quot;Bar&quot;</span><span class="p">,</span><span class="s2">&quot;PrAzar&quot;</span><span class="p">,</span><span class="s2">&quot;Sus&quot;</span><span class="p">,</span><span class="s2">&quot;Bel&quot;</span><span class="p">,</span><span class="s2">&quot;SgThree&quot;</span><span class="p">,</span><span class="s2">&quot;EpJer&quot;</span><span class="p">,</span><span class="s2">&quot;1Macc&quot;</span><span class="p">,</span><span class="s2">&quot;2Macc&quot;</span><span class="p">,</span><span class="s2">&quot;3Macc&quot;</span><span class="p">,</span><span class="s2">&quot;4Macc&quot;</span><span class="p">,</span><span class="s2">&quot;1Esd&quot;</span><span class="p">,</span><span class="s2">&quot;2Esd&quot;</span><span class="p">,</span><span class="s2">&quot;PrMan&quot;</span><span class="p">]</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nv">bcv = </span><span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nv">bcv_range = </span><span class="nx">bcv</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;.2&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bc</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv_range</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv_range</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should not die when turning off the Apocrypha between `parse()` and output&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Epistle of Jeremiah 3 NRSV&quot;</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">26</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">26</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.3&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">26</span><span class="p">]]</span>

		<span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Epistle of Jeremiah 4, Jeremiah 4 NRSV&quot;</span><span class="p">)</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.4,Jer.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">38</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.4,Jer.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">38</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nv">osis: </span><span class="s2">&quot;EpJer.1.4,Jer.4&quot;</span><span class="p">,</span> <span class="nv">translations: </span><span class="p">[</span><span class="s2">&quot;NRSV&quot;</span><span class="p">],</span> <span class="nv">indices: </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">38</span><span class="p">]]</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle Apocrypha ranges&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rev 21-Tobit 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.21-Tob.3&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle books preceded by `\\w`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Matt2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Matt2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Matt.2&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Matt2John1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Matt2John1&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;2John&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Matt2Phlm3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Matt.2,Phlm.1.3&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Matt2-4Phlm3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Matt2-4John3&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Matt.2-Matt.4,John.3&quot;</span><span class="p">,</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">14</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1John21John2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[]</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle long strings&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nv">strings = </span><span class="p">[]</span>
		<span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="mi">1001</span><span class="p">]</span>
			<span class="nx">strings</span><span class="p">.</span><span class="nx">push</span> <span class="s2">&quot;John.1&quot;</span>
		<span class="nv">string = </span><span class="nx">strings</span><span class="p">.</span><span class="nx">join</span> <span class="s2">&quot;,&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">string</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">string</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Ps 1,Psalm 1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1,Ps.1&quot;</span>

<span class="nx">describe</span> <span class="s2">&quot;Documentation compatibility&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">bcv = </span><span class="p">{}</span>

	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">bcv = </span><span class="k">new</span> <span class="nx">bcv_parser</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `osis()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16 NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16-17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16-John.3.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16,John.3.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18. ### Matthew 1 (NIV, ESV)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16,John.3.18,Matt.1&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `osis_and_translations()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16 NIV&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;John.3.16&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16-17&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;John.3.16-John.3.17&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;John.3.16,John.3.18&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18. ### Matthew 1 (NIV, ESV)&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;John.3.16,John.3.18&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Matt.1&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV,ESV&quot;</span><span class="p">]]</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `osis_and_indices()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16 NIV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3.16&quot;</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">],</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16-17&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3.16-John.3.17&quot;</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3.16,John.3.18&quot;</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16,18. ### Matthew 1 (NIV, ESV)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3.16,John.3.18&quot;</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">]},</span> <span class="p">{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;Matt.1&quot;</span><span class="p">,</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;NIV&quot;</span><span class="p">,</span><span class="s2">&quot;ESV&quot;</span><span class="p">],</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">38</span><span class="p">]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `parsed_entities()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">bcv</span><span class="p">.</span><span class="nx">set_options</span><span class="p">({</span><span class="s2">&quot;invalid_passage_strategy&quot;</span><span class="o">:</span> <span class="s2">&quot;include&quot;</span><span class="p">,</span> <span class="s2">&quot;invalid_sequence_strategy&quot;</span><span class="o">:</span> <span class="s2">&quot;include&quot;</span><span class="p">});</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3, 99&quot;</span><span class="p">).</span><span class="nx">parsed_entities</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3&quot;</span><span class="p">,</span><span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span><span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span><span class="s2">&quot;entity_id&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span><span class="s2">&quot;entities&quot;</span><span class="o">:</span> <span class="p">[{</span> <span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;John.3&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="o">:</span> <span class="mi">36</span> <span class="p">},</span> <span class="s2">&quot;entity_id&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;entities&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span><span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="o">:</span> <span class="mi">36</span> <span class="p">},</span><span class="s2">&quot;valid&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;valid&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;messages&quot;</span><span class="o">:</span> <span class="p">{}</span> <span class="p">},</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span><span class="s2">&quot;absolute_indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">]}]},{</span> <span class="s2">&quot;osis&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s2">&quot;translations&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">99</span> <span class="p">},</span> <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">99</span> <span class="p">},</span> <span class="s2">&quot;entity_id&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;entities&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">99</span> <span class="p">},</span><span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">99</span> <span class="p">},</span><span class="s2">&quot;valid&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;valid&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;messages&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;start_chapter_not_exist&quot;</span><span class="o">:</span> <span class="mi">21</span> <span class="p">}</span> <span class="p">},</span><span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="s2">&quot;absolute_indices&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]}]}]}]</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `include_apocrypha()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Tobit 1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">bcv</span><span class="p">.</span><span class="nx">include_apocrypha</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Tobit 1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Tob.1&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should match `set_options()`&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">bcv</span><span class="p">.</span><span class="nx">set_options</span><span class="p">({</span><span class="s2">&quot;osis_compaction_strategy&quot;</span><span class="o">:</span> <span class="s2">&quot;bcv&quot;</span><span class="p">});</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">bcv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis 1&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31&quot;</span>

<span class="nx">describe</span> <span class="s2">&quot;Real-world parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bcv&quot;</span>
		<span class="nv">p.options.captive_end_digits_strategy = </span><span class="s2">&quot;delete&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle sample tweets&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deut 28:21-65 lists sicknesses that are part of the curse&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.28.21-Deut.28.65&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;The Bible is awesome! Great noticing the commonalities between Revelation 4 and Isaiah 6! Done work for now.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.4.1-Rev.4.11,Isa.6.1-Isa.6.13&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Verse of the Day: Romans 5:10 - just a few days until Easter (see you at the Rave!)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.5.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;\&quot;For who is God besides the Lord? And who is a rock? Only our God.\&quot; 2 Sam 22:32 Good word to remember today.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Sam.22.32&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Reading and reflecting on Philippians 1 &amp; 2. &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phil.1.1-Phil.2.30&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Reading Numbers 12 &amp; John 11 this morning.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Num.12.1-Num.12.16,John.11.1-John.11.57&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Prov 14:1- The wise woman builds her house, but with her own hands the foolish one tears hers down&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.14.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Prov 14:1-The wise woman builds her house, but with her own hands the foolish one tears hers down&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.14.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Prov 14:12- The wise woman builds her house, but with her own hands the foolish one tears hers down&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.14.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;daily Bible reading: Num 20-22; Mark 7:1-13&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Num.20.1-Num.22.41,Mark.7.1-Mark.7.13&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;later in the week...(Matt 5 and Ex 20)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5.1-Matt.5.48,Exod.20.1-Exod.20.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Answer: Rev 19, sword in mouth, Zech 14, it&#39;s over.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.19.1-Rev.19.21,Zech.14.1-Zech.14.21&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;LACK of faith. Matthew 13:58....  &lt;3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.13.58&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matthew 6 : 25-34&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.6.25-Matt.6.34&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;~~Psalm 17:6a, 8&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.17.6,Ps.17.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deut. 32/4 says&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.32.1-Deut.32.52,Deut.4.1-Deut.4.49&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Not right, but hard to know what to do to correct it</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 50:4-9a Hebrews 12:1-3  John 13..  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.50.4-Isa.50.9,Heb.12.1-3John.1.13&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;speaking from 1 Corinthians 15:22 and this 2 Corinthians 12:9-11 2nite at 7.15pm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.15.22,2Cor.12.9-2Cor.12.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt. 5 thru 7...&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.5.1-Matt.7.29&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ROM 9 0 9 4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.9.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;\&quot;For it is by grace you have been saved, through faith--and this not from yourslelves, it is the gift of God...\&quot; Ephesians 2:8,0 NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eph.2.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matthew 13:10-16 10And the disciples came&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.13.10-Matt.13.16&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;\&quot;Why do you seek the living One among the dead?  He is not here, but He has risen.\&quot; Luke 24:5b-6a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.24.5-Luke.24.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luke 24*5b Resurrection Is Coming&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.24.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;You have to have wisdom and understanding and that comes from God (proverbs 1&amp;2) then you increase your knowledge.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.1.1-Prov.2.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;\&quot;How shall I repay the Lord for all the good things he has done for me?\&quot;  Psalm 116: Verse 10.  I am reflecting on this on Maundy Thursday.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.116.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Happy Good Friday people! Isaiah 54 Verse 15-17 is my personal mantra.  \&quot;No weapon against you will prevail\&quot;&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.54.15-Isa.54.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;  Cant sleep? Check out Isaiah 26:3. Hope this helps. Then read Proverbs Chap 10. The whole chapter. Good night.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.26.3,Prov.10.1-Prov.10.32&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;  john 3:16 i memorized it when i was 5.  now i like john 3:16-18..  vs 17 and 18 go with it too. they kinda help/clarify vs 16.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16,John.3.16-John.3.18,John.3.17-John.3.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 4:8/9.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.4.8-Matt.4.9&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isa41.10ESV fear not for I am with you&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;Isa.41.10&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;ESV&#39;</span><span class="p">]}]</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Alternate: Acts.1.1-Acts.1.14,Luke.1.1-Acts.28.31</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;studying Acts 1:1-14 for a sermon next Sunday... learning more and more about Luke-Acts&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.1.1-Acts.1.14&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matthew 28  1: Now after&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.28.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;EASTER SUNDAY READINGS: Acts of the Apostles 10:34. 37-43; RESPONSORIAL PSALM: Ps 117; Colossians 3:1-4; John 20:1-9.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.10.34,Acts.10.37-Acts.10.43,Ps.117.1-Ps.117.2,Col.3.1-Col.3.4,John.20.1-John.20.9&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Better: 1Thess.3.11-1Thess.3.13</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Thessalonians 3:11-1311Now may our God and Father himself and our Lord Jesus clear the way for us to come to you.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Thess.3.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 10:34, 37-43Psalms 118:1-2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.10.34,Acts.10.37-Acts.10.43,Ps.118.1-Ps.118.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Second Reading - Gen 22:1-2, 9a, 10-13, 15-18 ...   &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.22.1-Gen.22.2,Gen.22.9-Gen.22.13,Gen.22.15-Gen.22.18&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Better: Deut.8.1-Deut.8.20,Deut.8.18</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luv Deut 8 Especially Deu 8:18. 4 thou&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.8.1-Deut.8.20,Deut.8.18,Deut.8.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;His ride into Jerusalem ~480 years before the day(Zech 9:9)... his death ~600 years before he spoke his final words on the cross(Ps 22).&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Zech.9.9,Ps.22.1-Ps.22.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot; John 4 \u2013 v22&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.4.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Verse of the Week ~ Psalm 89 - 2009.04.11  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.89.1-Ps.89.52&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Col1:18, 1Th 4:16&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Col.1.18,1Thess.4.16&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Could go either way</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matthew 26:28.5&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.26.28,Matt.26.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1\u00a0Cor\u00a02\u00a01&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.2.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mark \t\u00a0\r\n 9&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Mark.9.1-Mark.9.50&quot;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;He has given proof of ths 2 all men by raising Him from the dead. Acts 17:31&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.17.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 3:16~17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.16-John.3.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;*Romans*8:38-39&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.8.38-Rom.8.39&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;rev.1:4. \&quot;7 spirits before the throne.\&quot;&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;April 14:  Deut. 34:1-Joshua 2:24; Psalm 79; Proverbs 12:26; Joshua 2:8-14 The sheer variety of pe..  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.34.1-Josh.2.24,Ps.79.1-Ps.79.13,Prov.12.26,Josh.2.8-Josh.2.14&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Wednesday&#39;s Bible Reading: Proverbs 15, Mark 7,8 and 9  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.15.1-Prov.15.33,Mark.7.1-Mark.9.50&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Prov.1:20-33 vs.33But whoever&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.1.20-Prov.1.33,Prov.1.33&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Better: Gal.5.22-Gal.5.25,1Cor.13.4-1Cor.13.13</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;read Gal 5:22-25 and1 Cor 13:4-13&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gal.5.22-Gal.5.25,Gal.5.1&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Better: Ps.91.1-Ps.91.2</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm91-1:2 (1 of my faves)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.91.1-Ps.91.16,Ps.1.2&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Better: Ezek.25.17</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ezekiel 25-17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ezek.25.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 22:9;28:27A - 700 Club&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.22.9,Prov.28.27&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Better: Ps.125.1</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm 125-1 Love it!&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.125.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;challenged by Eph 4:11-16. Verse 16 is really speaking to me&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eph.4.11-Eph.4.16,Eph.4.16&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Better: ''</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John - 4/18/2009 9:20:10 PM&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.4.1-John.4.54,John.18.1-John.18.40&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Breaks down at Leviticus</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;-Job 32:21-22-Col 3:25-Deut 10:17-Ja 2:1-4-Lev 19:15-Rom 2:9-11-Acts 10:34-35-Dt 1:17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Job.32.21-Job.32.22,Col.3.25,Deut.10.17,Jas.2.1-Jas.2.4,Lev.19.15-Rom.2.9,Rom.2.11,Acts.10.34-Acts.10.35,Deut.1.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Revelation 13:11:18&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.13.11,Rev.13.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;===Read Mark chapter 5========Mark 6:30-32 NKJV 30 Then the apostles gathered&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s1">&#39;Mark.5.1-Mark.5.43&#39;</span><span class="p">,</span> <span class="s1">&#39;NKJV&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Mark.6.30-Mark.6.32&#39;</span><span class="p">,</span> <span class="s1">&#39;NKJV&#39;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;look at psalms 42:1, hebrews 13-15, jeremiah 33-11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.42.1,Heb.13.15,Jer.33.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Though he fall, he shall not be utterly cast down: for the LORD upholdeth him with his hand. (Psalm 37:,24)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.37.1-Ps.37.40,Ps.24.1-Ps.24.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;gal?: 4 People&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 peter 1-7 1 peter 8-22 Always&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Pet.1.7&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;(Psalm 19:1.8)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.19.1,Ps.19.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1John3v21,22; 1John5v14,15 #prayer #bibleStudy&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1John.3.21-1John.3.22,1John.5.14-1John.5.15&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Better: 2Pet.1.-2Pet.1.11</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Peter 1:1-11 1 Simon Peter&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Pet.1.1-2Pet.1.11,2Pet.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Corinthians 12-9-10-11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Cor.12.9-2Cor.12.10,2Cor.12.11&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Better: Phil.4.6-Phil.4.7</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Philippians 4~6-7&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phil.4.1-Phil.4.23&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Eccl11.7msg&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Eccl.11.7&quot;</span><span class="p">,</span> <span class="s2">&quot;MSG&quot;</span><span class="p">]]</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Better: Matt.12.15-Matt.12.32</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matthew 12.15_32, rainy&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.12.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;From the Bible,1stTim.4:1-2,1st.John4:1-6.there&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Tim.4.1-1Tim.4.2,1John.4.1-1John.4.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;for Exodus 20 7th Day of rest.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Exod.20.1-Exod.20.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Devotions: John 8:12-30,Luke: 8:4-11,Romans 3:21-26&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.8.12-John.8.30,Luke.8.4-Luke.8.11,Rom.3.21-Rom.3.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;read isaiah 1-thru-7&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.1.1-Isa.7.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;psalm37::5&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.37.5&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Better: Deut.6.1-Deut.7.26,Eccl.2,John.19</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deuteronomy 6,7Ecclesiastes 2John 19&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.6.1-Deut.7.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Bible study tonight on Colossians 1:13-14 and 1:20+.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Col.1.13-Col.1.14,Col.1.20&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;(Heb 11.1nrsv)&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s1">&#39;Heb.11.1&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span><span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;NRSV&#39;</span><span class="p">]}]</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Better if translations had HCSB</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;my mouth (HCSB) Psalm 119-103&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nv">osis: </span><span class="s1">&#39;Ps.119.103&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">29</span><span class="p">],</span><span class="nv">translations: </span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Timothy 3;1-5&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Tim.3.1-2Tim.3.17,2Tim.1.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Timothy 3; NIV, 1-5 ESV&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s1">&#39;2Tim.3.1-2Tim.3.17&#39;</span><span class="p">,</span> <span class="s1">&#39;NIV&#39;</span><span class="p">],[</span><span class="s1">&#39;2Tim.1.5&#39;</span><span class="p">,</span> <span class="s1">&#39;ESV&#39;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Timothy 3; NIV, ch. 1 ESV&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s1">&#39;2Tim.3.1-2Tim.3.17&#39;</span><span class="p">,</span> <span class="s1">&#39;NIV&#39;</span><span class="p">],[</span><span class="s1">&#39;2Tim.1.1-2Tim.1.18&#39;</span><span class="p">,</span> <span class="s1">&#39;ESV&#39;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Timothy 3; NIV, vv 1-5 ESV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;2Tim.3.1-2Tim.3.17&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;NIV&#39;</span><span class="p">]},{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;2Tim.3.1-2Tim.3.5&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">18</span><span class="p">,</span><span class="mi">28</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;ESV&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2nd Reading: Ecc 6 \u2013 v12 James 4:14.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eccl.6.12,Jas.4.14&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jas 1:26,27. Vs 26- bridle.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jas.1.26-Jas.1.27,Jas.1.26&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ezekiel - 25-17.mp3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ezek.25.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 CORITHIANS VERSE 3-11 EPHESIANS 6 -10&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Cor.1.3-2Cor.1.11,Eph.6.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Samuel 16:13 e 16:7! :)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Sam.16.13,1Sam.16.7&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Better: Prov.5.18-Prov.5.23</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;proverbs 5/18-23&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.5.1-Prov.5.23,Prov.18.1-Prov.23.35&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Better: 1Cor.4.7-1Cor.4.8</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Corinthians 4-7 and 8.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.4.1-1Cor.8.13&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Better: 1Cor.12.28,Eph.4.7-Eph.4.8,Eph.4.11,Rev.18.20</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Corinthians 12:28,Ephesians 4:7-8, 11-Revelation 18:20&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.12.28,Eph.4.7-Eph.4.8,Eph.4.11-Rev.18.20&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deut 15 \u2013 v19-23&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.15.19-Deut.15.23&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;(2Ch 26:15).&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Chr.26.15&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Better: Jas.1.2-Jas.1.4</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;James 1. Vv 2 thru 4.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jas.1.1-Jas.1.27,Jas.1.2-Jas.1.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Num6.25-26also look@ Philipp2.15hav warm day&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Num.6.25-Num.6.26,Phil.2.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mark3.4.5.6.7.8.9.10.11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Mark.3.4,Mark.5.6,Mark.7.8,Mark.9.10-Mark.9.11&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Daily Scripture Reading: 2 Sam. 23-1 Kgs. 1 and Luke 22:39-71.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Sam.23.1-1Kgs.1.53,Luke.22.39-Luke.22.71&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Better: Matt.24.1-Matt.24.51,Luke.21.1-Luke.21.38</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;read matthew 24 and luke 21 and see 4 yourself!!!!&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.24.1-Matt.24.51,Luke.21.1-Luke.21.38,Luke.4.1-Luke.4.44&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 1&#39;20-24&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.1.20-Prov.1.24&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Devotions: John 10:22-42  vs 27 \&quot;My sheep hear my voice&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;John.10.22-John.10.42,John.10.27&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">31</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Leviticus 26.8. &#39;5 shall chase a 100&#39;.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Lev.26.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Leviticus 26.8. \&quot;5 shall chase a 100&#39;.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Lev.26.8&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deuteronomy 6:4-9 and Matthew 22-34-40&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.6.4-Deut.6.9,Matt.22.34-Matt.22.40&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Better: Ps.40.1-Ps.40.17</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm 40 - 12:02 AM&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.40.1-Ps.40.17,Ps.12.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm 40 - 09:27 AM&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.40.1-Ps.40.17&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;We lost a few judges... 5:00Pm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;We lost a few judges... 5:01Pm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Better: ""</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;We lost a few judges. 5:01Pm&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Judg.5.1&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Better: 2Cor.3.4,2Cor.3.6</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Memorizing 2Cor 3:4.-6 this week. Quiz me!&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Cor.3.4,2Cor.3.6&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Better: Isa.5.20</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 5;20b.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.5.1-Isa.5.30,Isa.5.20&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Tim 2:2:11-15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Tim.2.2,1Tim.2.11-1Tim.2.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;in Ezek 34. Love how the Lectionary pulled together Ps 23, Ez, and John 10 on one day.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ezek.34.1-Ezek.34.31,Ps.23.1-Ps.23.6,John.10.1-John.10.42&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Better: Rom.12.11</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Rom12?11&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.12.1-Rom.12.21&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;MATTHEW 7 VS1-&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.7.1&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Better: 1Kgs.4.25,Mic.4.4,Zech.3.10</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1 Kings 4:25 - Micah 4:4 - Zechariah 3:10&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Kgs.4.25-Mic.4.4,Zech.3.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ephesians 4:5-6 (NKJV)  5 one Lord&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eph.4.5-Eph.4.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Judges 21:1-Ruth 1:22; John 4:4-42; Psalm 105:1-15; Proverbs 14:25 -  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Judg.21.1-Ruth.1.22,John.4.4-John.4.42,Ps.105.1-Ps.105.15,Prov.14.25&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Alternate: 1Thess.5.11,Prov.17.22,Luke18:15</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;encourages Thes.5:11. 5Be a mom who laughs Prov.17:22. 6Be a mom who hugsLuke18:15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.17.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;...Whoever does these things will never be shaken.\&quot; Psalm 15:2, 5b&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.15.2,Ps.15.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Colossians 2:6-7 ... 6 Therefore)  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Col.2.6-Col.2.7&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Colossians 2:6-7:6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Col.2.6-Col.2.7,Col.2.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Samuel 28:20- 2Samuel 12:10&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Sam.28.20-2Sam.12.10&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 53. 700 years before Jesus&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.53.1-Isa.53.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John.2.1-John.2.25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.2.1-John.2.25&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Better: 1John.2.25</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1-John 2:25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.2.25&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Better: Rom.8.24-Rom.8.30</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ROMANS 8 24_30&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.8.1-Rom.8.39&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;(2.Chronicles 15.7 - NIV)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Chr.15.7&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;\&quot;God So Loved the World, Part 1\&quot; John 3:9-18  &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.3.9-John.3.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Romans 5:12-21 0. Prelude&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.5.12-Rom.5.21&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Better: Prov.6.9-Prov.6.15</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 6:/9-15&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.6.1-Prov.6.35,Prov.9.1-Prov.15.33&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Better (vs = versus): Gen.1.27,Gen.2.7</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;origin of man in Genesis 1:27 vs 2:7.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.27,Gen.1.2,Gen.1.7&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Genesis verse 6:4 and Numbers 13:33? ( &quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.6.4,Num.13.33&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Better: 2Cor.4.16</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 corinthians 4~16&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Cor.4.1-2Cor.4.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;OUR job is to 1 humble&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isa 1&#39;18.\&quot;Come&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.1.18&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Judges 21-Ruth 1; Psalm 105:1-15; Proverbs 14:25; Judges 21:25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Judg.21.1-Ruth.1.22,Ps.105.1-Ps.105.15,Prov.14.25,Judg.21.25&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Better: Ps.34.1-Ps.34.4</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 34:1-4 Verse 4 reads&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.34.1,Ps.4.4&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Better: ""</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;is2prosper&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.2.1-Isa.2.22&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;read THE PSALMS 5/ 29/ 95/ 1 CHRONICLES 29:10-13 LUKE 1:68-79&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.5.1-Ps.5.12,Ps.29.1-Ps.29.11,Ps.95.1-Ps.95.11,1Chr.29.10-1Chr.29.13,Luke.1.68-Luke.1.79&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Scripture Proverbs 31:10-31 (KJV)10Who can find&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.31.10-Prov.31.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deut 28 - v66-67 is a real&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Deut.28.66-Deut.28.67&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Josh 24, Duet 28!&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Josh.24.1-Josh.24.33,Deut.28.1-Deut.28.68&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Better: ""</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;ph2o&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phil.2.1-Phil.2.30&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;luke-111-13-&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.13.1-Luke.13.35&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;IC4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Better: Acts.14.19-Acts.14.28,Ps.145.10-Ps.145.13,Ps.145.21,John.14.27-John.14.31</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 14:19-28; Ps 145:10-11, 12-13ab, 21; Jn 14:27-31a&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.14.19-Acts.14.28,Ps.145.10-Ps.145.13,John.14.27-John.14.31&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Romans 1:16. 1 luv&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.1.16,Rom.1.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2nd Chapter of Acts - 8.25 USD&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.2.1-Acts.8.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John&lt;3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Compare Is 59:16ff to Eph 6.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.59.16-Eph.6.24&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 54:10, 32:17. 55.12, 57:12&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Isa.54.10,Isa.32.17,Isa.55.12,Isa.57.12&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Better: John.12.20-John.13.20,John.12.45</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 12:20-13:20 compare verses 12:45 And whoever&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.12.20-John.13.20,John.13.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Numbers 15:37 - Malachi 4:2 - Mark 5:25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Num.15.37-Mal.4.2,Mark.5.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 13:1-17, 31b-35Have&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.13.1-John.13.17,John.13.31-John.13.35&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Acts 2 Revelation: v1. Seven days&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.2.1-Acts.2.47,Rev.1.1&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Better: Ps.11.1-Ps.15.5,Prov.3.1-Prov.3.35</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalms 11 to 15 and Proverbs 3 . . . 5 chapters of Psalms and 1 chapter of Proverbs&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.11.1-Ps.15.5,Prov.3.1-Prov.3.35,Ps.1.1-Ps.1.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;proverbs 31~ :30&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.31.1-Prov.31.31,Prov.30.1-Prov.30.33&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Better: Gen.1.1-Gen.1.25</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Finished translating Genesis 1 through verse 25.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.25&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Better: Luke.9.56</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luke 9..56&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.9.1-Luke.9.62&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ecclesiastes 5:2 &lt;-- 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eccl.5.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Deal with it: Matthew 10:32. 33&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.10.32-Matt.10.33&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Better: Prov.28.25</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Prov.28:5   6/25&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Prov.28.5-Prov.28.6,Prov.28.25&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;rev8:1.5, and there&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rev.8.1,Rev.8.5&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;*ROM 11 *TO 29&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Rom.11.29&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Better: Ps.62.1-Ps.62.2</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 62:1-2 verse 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.62.1,Ps.2.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Psalm 109:30 ;0)&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.109.30&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;a king 6-9&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1Thes 3-4 \u2013 4:13-16&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Thess.3.1-1Thess.4.18,1Thess.4.13-1Thess.4.16&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ps 26/40/58/61-62/64: Psalm 26:&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.26.1-Ps.26.12,Ps.40.1-Ps.40.17,Ps.58.1-Ps.58.11,Ps.61.1-Ps.62.12,Ps.64.1-Ps.64.10,Ps.26.1-Ps.26.12&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;portrayed by Luke - Acts 11,13&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Acts.11.1-Acts.11.30,Acts.13.1-Acts.13.52&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Better: Ps.1.1-Ps.1.6,Ps.3.1-Ps.3.8,Ps.8.1-Ps.8.9,Ps.15-Ps.16,Ps.18</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Today&#39;s meditation. Psalm 1, 3, 8, 15 16, 18&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.1.1-Ps.1.6,Ps.3.1-Ps.3.8,Ps.8.1-Ps.8.9&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Better: Matt.22.37</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;matt 22:37,2nd part&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.22.37,Matt.22.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 13:15, 34b&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.13.15,John.13.34&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 13:15, 34began&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;John.13.15&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;John 13:15, 34 began&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s1">&#39;John.13.15,John.13.34&#39;</span><span class="p">,</span><span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">14</span><span class="p">],</span><span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Eph. 4:26-27.30. NIV.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Eph.4.26-Eph.4.27,Eph.4.30&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;so. See 3 John 5-8.&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;3John.1.5-3John.1.8&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">18</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Dan, verse 14&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Dan.1.14&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 is my&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Isaiah 41:10 ha ha ha&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.41.10&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;see Isaiah 47:148:22 - Ps 117:7-10 - Gal 3:2&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Gal.3.2&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">44</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;matt chapter 1, verse 9 NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.1.9&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jude chapter 1, verse 9 NIV&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Jude.1.9&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jdg 12:11 break Judges 99,KJV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.12.11&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jdg 12:11 break Judges,chapter,12,KJV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.12.11&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jdg 12:11 break Judges 99,2,KJV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.12.11&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.2.1-Judg.2.23&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">31</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;KJV&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Jdg 12:11 break Judges 2,99, KJV&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.12.11&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Judg.2.1-Judg.2.23&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">32</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;KJV&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Gen 1;1:2 The earth&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Gen.1.1-Gen.1.31,Gen.1.2&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>The following two give different reponses. In the first one, the <code>218</code> is part of the sequence. In the second, the <code>218</code> gets removed in <code>@match_passages</code> before the grammar even sees it--most three-digit numbers at the end of strings get removed.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 4:25-27. 218 &quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Prov.4.25-Prov.4.27&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Proverbs 4:25-27. 218 is&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Prov.4.25-Prov.27.27&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>The following two give different responses because of the space before the last number. That may not make sense.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Numbers 2-999&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Num.2.1-Num.36.13&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Numbers 2- 999&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Num.2.1-Num.2.34&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Ezk 1,4:5, 6 365&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Ezek.1.1-Ezek.1.28,Ezek.4.5-Ezek.4.6&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Better indices: [0, 21]</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;is 15-14-12-25-7-15-4&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.15.7,Isa.15.4&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;job is 2 f&quot;</span><span class="p">).</span><span class="nx">osis_and_indices</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[{</span><span class="nx">osis</span><span class="o">:</span><span class="s2">&quot;Isa.2.1-Isa.66.24&quot;</span><span class="p">,</span> <span class="nx">indices</span><span class="o">:</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="nx">translations</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]}]</span>

<span class="nx">describe</span> <span class="s2">&quot;Adding new translations&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>

	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Don't do this in real life. It edits the prototype and affects all subsequent objects on the page.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nv">p.regexps.translations = </span><span class="sr">/\b(?:niv|comp)\b/gi</span>
		<span class="nv">p.translations.aliases.comp = osis: </span><span class="s2">&quot;COMP&quot;</span><span class="p">,</span> <span class="nv">alias: </span><span class="s2">&quot;comp&quot;</span>
		<span class="nv">p.translations.comp = order: </span><span class="p">{</span><span class="s2">&quot;Matt&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Gen&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
		<span class="nv">p.translations.comp.chapters = </span><span class="p">{</span><span class="s2">&quot;Matt&quot;</span><span class="o">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">chapters</span><span class="p">.</span><span class="nx">Matt</span><span class="p">,</span> <span class="s2">&quot;Gen&quot;</span><span class="o">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">translations</span><span class="p">.</span><span class="nx">default</span><span class="p">.</span><span class="nx">chapters</span><span class="p">.</span><span class="nx">Gen</span><span class="p">}</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle reparsing when given a new translation&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 2-Gen3 NIV&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Matt.2,Gen.3&quot;</span><span class="p">,</span> <span class="s2">&quot;NIV&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Matt 2-Gen3 COMP&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Matt.2-Gen.3&quot;</span><span class="p">,</span> <span class="s2">&quot;COMP&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Exodus 3, Matt 5 COMP&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Matt.5&quot;</span><span class="p">,</span> <span class="s2">&quot;COMP&quot;</span><span class="p">]]</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Exodus 3-Matt 5 COMP&quot;</span><span class="p">).</span><span class="nx">osis_and_translations</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="p">[[</span><span class="s2">&quot;Matt.5&quot;</span><span class="p">,</span> <span class="s2">&quot;COMP&quot;</span><span class="p">]]</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>"Adding new translations" should be the last spec; it overwrites <code>bcv_parser</code> in destructive ways.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 